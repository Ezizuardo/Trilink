:root{
  --bg:#fdfefe; --card:#ffffff; --text:#0b1b0b; --muted:#6b7280;
  --primary:#1bb34a; --accent:#34c759; --danger:#c62828; --chip:#eafaf0; --btn:#1bb34a;
  --icon-color:#1b5ad7;
}
html[data-theme="dark"]{
  --bg:#0a0f0a; --card:#101510; --text:#e6ffe6; --muted:#93a3a6;
  --primary:#39ff14; --accent:#00e676; --chip:#0f1710; --btn:#172517;
  --icon-color:#39ff14;
}
*{box-sizing:border-box}
body.body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto}
.topbar{position:sticky;top:0;background:var(--card);border-bottom:1px solid rgba(0,0,0,.06);
  display:flex;justify-content:space-between;align-items:center;padding:12px 16px;z-index:10}
.brand{font-weight:800;color:var(--primary);display:flex;align-items:center;gap:8px}
.brand .tagline{font-weight:500;font-size:14px;margin-left:8px;color:var(--muted)}
.logo-hex{width:18px;height:18px;background:var(--primary);clip-path:polygon(25% 6.7%,75% 6.7%,100% 50%,75% 93.3%,25% 93.3%,0 50%)}
.left{display:flex;gap:16px;align-items:center}
.nav{display:flex;gap:8px;align-items:center}
.nav-link{display:flex;align-items:center;gap:6px;padding:6px 10px;border-radius:10px;text-decoration:none;color:var(--text);font-weight:500;position:relative}
.nav-link:hover{background:rgba(0,0,0,.05)}
.icon{width:18px;height:18px;fill:var(--icon-color);flex-shrink:0}
h1 .icon{margin-right:8px;vertical-align:middle}
.nav-link span{display:inline-flex;align-items:center;gap:6px}
.nav-dot{position:absolute;top:6px;right:6px;width:8px;height:8px;border-radius:50%;background:var(--danger);box-shadow:0 0 0 2px var(--card)}
.dropdown-label{display:flex;align-items:center;gap:6px;font-weight:500;color:var(--text)}
.container{max-width:1060px;margin:18px auto;padding:0 16px}
.card{background:var(--card);border:1px solid rgba(0,0,0,.08);border-radius:16px;padding:16px}
.muted{color:var(--muted)}
.btn{display:inline-block;background:var(--btn);color:#fff;border:none;border-radius:12px;padding:10px 14px;text-decoration:none;cursor:pointer}
.btn:hover{filter:brightness(.95)} .btn.outline{background:transparent;border:1px solid var(--primary);color:var(--primary)} .btn.strong{background:var(--primary)}
.form{display:grid;gap:12px} .form.narrow{max-width:420px}
.remember{display:flex;align-items:center;gap:8px}
input,select,textarea{padding:10px 12px;border:1px solid #cbd5e1;border-radius:10px;background:transparent;color:var(--text)}
.feed{display:grid;gap:16px} .post-h{display:flex;gap:12px;align-items:center}
.row{display:flex;gap:24px;align-items:flex-start} .col{flex:1} .avatar-col{max-width:220px;text-align:center}
.avatar{width:160px;height:160px;object-fit:cover;border-radius:999px;border:2px solid #e5e7eb}
.avatar-mini{width:40px;height:40px;border-radius:999px;object-fit:cover}
.file-btn{position:relative;overflow:hidden} .file-btn input[type=file]{position:absolute;inset:0;opacity:0;cursor:pointer}
.flash-wrap{display:grid;gap:8px;margin-bottom:12px} .flash{padding:10px 12px;border-radius:10px}
.flash.ok{background:#e8f5e9;border:1px solid #a5d6a7} .flash.error{background:#ffebee;border:1px solid #ef9a9a}
.login-centered{display:grid;place-items:center;min-height:70vh} .login-card{width:360px}
.grid-2{display:grid;grid-template-columns:repeat(2,minmax(240px,1fr));gap:16px}
.role.v2{display:grid;gap:8px;align-content:center;text-align:center;border:1px dashed var(--accent)}
.searchbar{display:flex;gap:8px;margin:8px 0;align-items:stretch}
.search-input-wrap{position:relative;flex:1}
.search-input-wrap input{width:100%}
.search-suggest{position:absolute;top:calc(100% + 4px);left:0;right:0;background:var(--card);border:1px solid rgba(0,0,0,.12);border-radius:12px;box-shadow:0 12px 24px rgba(0,0,0,.12);z-index:5;max-height:calc(5 * 64px + 16px);overflow-y:auto;padding:6px;display:flex;flex-direction:column;scrollbar-width:thin;scrollbar-color:var(--primary) transparent}
.search-suggest.scrollable{padding-right:10px}
.search-suggest::-webkit-scrollbar{width:8px}
.search-suggest::-webkit-scrollbar-track{background:transparent;border-radius:12px}
.search-suggest::-webkit-scrollbar-thumb{background:var(--primary);border-radius:12px}
.search-suggest[hidden]{display:none}
.suggest-list{display:grid;gap:6px}
.suggest-item{display:flex;align-items:center;gap:10px;padding:8px;border-radius:10px;background:rgba(0,0,0,.03);border:none;width:100%;text-align:left;font-weight:600;color:var(--text);cursor:pointer;min-height:56px}
.suggest-item .avatar-mini{width:32px;height:32px}
.suggest-item small{display:block;font-weight:500;color:var(--muted)}
.suggest-item.has-course{background:rgba(27,179,74,.12)}
.suggest-item:focus-visible,.suggest-item:hover{outline:none;background:rgba(27,179,74,.18)}
.grid-cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px}
.card.person{display:flex;flex-direction:column;gap:12px;text-decoration:none;color:var(--text);transition:transform .15s ease,box-shadow .15s ease}
.card.person:hover{transform:translateY(-2px);box-shadow:0 12px 24px rgba(0,0,0,.16)}
.person-row{display:flex;align-items:center;gap:12px}
.person-actions{display:flex;align-items:center;justify-content:space-between;font-size:14px;font-weight:600;color:var(--primary)}
.person-actions .icon{width:16px;height:16px}
.course-card{position:relative;overflow:hidden}
.course-card-header{position:relative}
.course-thumb{border-radius:12px;background-size:cover;background-position:center;height:160px;position:relative;overflow:hidden;display:grid;place-items:center;padding:12px;text-align:center;color:var(--muted);border:1px solid rgba(0,0,0,.08)}
.course-thumb-placeholder{font-weight:600}
.course-count{position:absolute;left:12px;bottom:12px;background:rgba(0,0,0,.75);color:#fff;padding:4px 10px;border-radius:999px;font-size:12px;font-weight:600}
.price-tag{position:absolute;top:12px;right:12px;background:var(--primary);color:#fff;padding:6px 12px;border-radius:999px;font-weight:700;box-shadow:0 8px 16px rgba(0,0,0,.2)}
.hover-video{position:absolute;inset:0;opacity:0;transition:opacity .2s ease}
.hover-video video{width:100%;height:100%;object-fit:cover;border-radius:inherit}
.course-card:hover .hover-video{opacity:1}
.preview-info{display:grid;gap:4px}
.preview-title{font-weight:700;font-size:14px;color:var(--primary)}
.muted.small{font-size:13px}
.stack-sm{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}
.file-field small{display:block;margin-top:6px}
.course-manage{display:grid;gap:16px}
.course-manage-header{display:flex;align-items:flex-start;justify-content:space-between;gap:16px;flex-wrap:wrap}
.course-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}
.course-card-mini{display:grid;gap:10px;padding:12px;border:1px solid rgba(0,0,0,.08);border-radius:14px;background:rgba(0,0,0,.02)}
.course-card-mini .course-thumb{height:140px}
.course-card-mini.compact{padding:8px}
.course-card-mini.compact .course-thumb{height:120px}
.course-info h4{margin:0;font-size:16px}
.course-info p{margin:0;font-size:13px}
.course-empty{text-align:center;padding:32px 16px;border:1px dashed var(--accent);border-radius:16px;color:var(--muted)}
.profile-note{background:rgba(0,0,0,.04);padding:10px 12px;border-radius:12px;font-size:14px}
.course-form{display:grid;gap:18px}
.page-heading{display:grid;gap:8px;margin-bottom:16px}
.page-heading h1{display:flex;align-items:center;gap:10px;margin:0}
.course-editor{display:grid;gap:20px}
.course-form-main{display:grid;grid-template-columns:minmax(0,1fr) 320px;gap:24px;align-items:start}
@media (max-width:900px){.course-form-main{grid-template-columns:1fr}}
.course-form-fields{display:grid;gap:16px}
.course-cover{display:grid;gap:12px}
.cover-preview{border:1px dashed var(--accent);border-radius:16px;overflow:hidden;min-height:220px;background:rgba(0,0,0,.02);display:grid;place-items:center}
.cover-preview img{width:100%;height:100%;object-fit:cover}
.cover-placeholder{color:var(--muted);font-weight:600;text-align:center;padding:24px}
.section-head{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
.existing-list{display:grid;gap:12px}
.existing-card{border:1px solid rgba(0,0,0,.08);border-radius:14px;padding:14px;display:grid;gap:12px;background:rgba(0,0,0,.02)}
.existing-card-head{display:flex;align-items:center;justify-content:space-between;gap:12px}
.badge{display:inline-flex;align-items:center;justify-content:center;padding:4px 12px;border-radius:999px;font-weight:700;font-size:13px;background:rgba(27,179,74,.12);color:var(--primary)}
.badge.accent{background:rgba(27,179,74,.16)}
.toggle-remove{display:flex;align-items:center;gap:8px;font-weight:600;color:var(--danger)}
.toggle-remove input{accent-color:var(--danger)}
.course-manage-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:18px}
.course-manage-card{border:1px solid rgba(0,0,0,.08);border-radius:16px;overflow:hidden;background:var(--card);display:grid;gap:0;transition:box-shadow .2s ease}
.course-manage-card:hover{box-shadow:0 12px 24px rgba(0,0,0,.08)}
.course-manage-cover .course-thumb{border-radius:0;height:160px}
.course-manage-body{padding:16px;display:grid;gap:12px}
.course-manage-actions{display:flex;gap:8px;flex-wrap:wrap}
.course-manage-actions .btn{flex:1 1 140px;text-align:center}
.file-pair{align-items:start}
.videos-block{display:grid;gap:12px}
.videos-head{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}
.video-items{display:grid;gap:12px}
.video-item{border:1px solid rgba(0,0,0,.08);border-radius:14px;padding:12px;display:grid;gap:12px;background:rgba(0,0,0,.02);position:relative}
.video-item .remove-video{align-self:flex-end;background:transparent;border:none;color:var(--danger);font-weight:600;cursor:pointer}
.video-item .remove-video:hover{color:#ff1744}
.videos-block .small{font-size:13px}
.course-detail{display:grid;gap:16px;margin-bottom:24px}
.course-detail-header{display:grid;gap:16px;grid-template-columns:minmax(200px,260px) 1fr;align-items:start}
.course-detail-cover{position:relative;border-radius:16px;background-size:cover;background-position:center;min-height:180px;overflow:hidden;border:1px solid rgba(0,0,0,.1)}
.course-detail-meta h3{margin:0}
.course-detail-meta p{margin:6px 0 0}
.course-player{display:grid;gap:12px;position:relative}
.course-player video{width:100%;border-radius:16px;max-height:420px;background:#000}
.course-player.locked video{filter:blur(2px);opacity:.4}
.player-lock{position:absolute;inset:0;border-radius:16px;background:rgba(0,0,0,.78);display:flex;align-items:center;justify-content:center;padding:24px;text-align:center}
.player-lock-content{display:grid;gap:12px;color:#fff;max-width:420px}
.player-lock-content .btn{justify-self:center}
.player-toolbar{display:flex;justify-content:space-between;align-items:center;gap:16px;flex-wrap:wrap}
.player-controls label{display:flex;gap:8px;align-items:center;font-weight:600}
.player-controls select{min-width:140px}
.course-placeholder{padding:48px 16px;text-align:center;border:1px dashed var(--accent);border-radius:16px;color:var(--muted);font-weight:600}
.chat-box{display:flex;flex-direction:column;gap:8px}
.chat-box .messages{flex:1;overflow:auto;max-height:65vh}
.send.sticky{position:sticky;bottom:0;background:var(--card);padding-top:8px}
.theme-toggle.small .track{width:38px;height:20px;border-radius:999px;background:#cbd5e1;position:relative;display:inline-block}
.theme-toggle .knob{position:absolute;top:3px;left:3px;width:14px;height:14px;background:#fff;border-radius:50%;transition:transform .2s}
.theme-toggle.small input:checked + .track .knob{transform:translateX(18px)}
.avatar-menu{position:relative} .avatar-button{background:transparent;border:none;cursor:pointer;padding:0}
.avatar-menu .dropdown{position:absolute;right:0;top:48px;background:var(--card);border:1px solid rgba(0,0,0,.1);border-radius:12px;padding:12px;display:none;min-width:240px;box-shadow:0 12px 24px rgba(0,0,0,.18)}
.avatar-menu.open .dropdown{display:block}
.dropdown-row{display:flex;align-items:center;justify-content:space-between;padding:6px 0}
.dropdown-link{display:flex;gap:8px;align-items:center;padding:8px 0;color:var(--text);text-decoration:none}
.dropdown-link:hover{color:var(--primary)}
.disabled-card{text-align:center;font-size:18px;font-weight:600;color:var(--primary)}
.profile-card{display:flex;gap:24px;align-items:center;flex-wrap:wrap}
.profile-avatar{flex:0 0 auto}
.profile-main{flex:1;min-width:240px;display:grid;gap:12px}
.profile-meta{display:flex;gap:16px;flex-wrap:wrap;margin:8px 0 0}
.profile-meta div{display:flex;flex-direction:column;gap:4px}
.profile-meta .label{font-size:12px;text-transform:uppercase;color:var(--muted);letter-spacing:.04em}
.profile-meta .value{font-weight:600}
.profile-tabs{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
.profile-tabs .tab{padding:8px 16px;border-radius:999px;background:rgba(0,0,0,.05);text-decoration:none;color:var(--text);font-weight:600}
.profile-tabs .tab:hover{background:rgba(0,0,0,.08)}
.profile-tabs .tab.active{background:var(--primary);color:#fff}
.profile-form{display:grid;gap:16px}
.profile-form .field{display:flex;flex-direction:column;gap:6px;color:var(--text)}
.profile-form .field span{font-size:14px;color:var(--text);font-weight:600}
.profile-form .field input{padding:10px 12px}
.file-row{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
.form-actions{display:flex;gap:12px;justify-content:flex-end;flex-wrap:wrap}
.course-preview{display:grid;gap:12px}
.profile-overview{display:grid;gap:6px}
.profile-overview p{margin:0}
.profile-public{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px;align-items:start}
.public-left{display:grid;gap:8px}
.public-right{display:grid;gap:12px}
.course-page{display:grid;gap:24px}
.course-header{display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap}
.course-author{display:flex;align-items:center;gap:16px}
.course-author-avatar{width:72px;height:72px;border-radius:999px;object-fit:cover;border:2px solid rgba(0,0,0,.08)}
.course-header-meta{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
.price-pill{padding:6px 14px;border-radius:999px;background:var(--primary);color:#fff;font-weight:700;box-shadow:0 10px 20px rgba(0,0,0,.14)}
.course-layout{display:grid;grid-template-columns:minmax(0,1fr) 320px;gap:24px;align-items:start}
@media (max-width:1100px){.course-layout{grid-template-columns:1fr}}
.course-side{display:grid;gap:16px}
.side-card{border:1px solid rgba(0,0,0,.08);border-radius:16px;padding:16px;background:var(--card);display:grid;gap:12px}
.side-card.compact{gap:8px}
.side-courses{display:grid;gap:12px}
.side-course{display:flex;gap:12px;text-decoration:none;color:var(--text);padding:10px;border-radius:14px;border:1px solid rgba(0,0,0,.08);transition:border .2s ease,background .2s ease}
.side-course:hover{border-color:var(--primary)}
.side-course.active{border-color:var(--primary);background:rgba(27,179,74,.08)}
.side-thumb{width:72px;height:72px;border-radius:12px;background-size:cover;background-position:center;background-color:rgba(0,0,0,.08);flex-shrink:0}
.side-info{display:grid;gap:4px;align-items:center}
.side-title{font-weight:600}
.side-list{list-style:none;margin:0;padding:0;display:grid;gap:6px;font-size:14px}
.course-hero{display:grid;grid-template-columns:minmax(0,1fr) 320px;gap:24px;align-items:start}
@media (max-width:900px){.course-hero{grid-template-columns:1fr}}
.hero-cover{border-radius:16px;overflow:hidden;border:1px solid rgba(0,0,0,.08);background:rgba(0,0,0,.04);min-height:220px;display:grid;place-items:center}
.hero-cover img{width:100%;height:100%;object-fit:cover}
.lesson-rail{display:grid;gap:12px;margin-top:16px}
.lesson-rail.locked .lesson-card{pointer-events:none;opacity:.5}
.lesson-scroll{display:flex;gap:12px;overflow-x:auto;padding-bottom:6px}
.lesson-card{display:flex;align-items:center;gap:10px;padding:10px 14px;border-radius:12px;border:1px solid rgba(0,0,0,.12);background:var(--card);cursor:pointer;min-width:180px;transition:border .2s ease,background .2s ease;font-weight:600}
.lesson-card:hover{border-color:var(--primary)}
.lesson-card.active{border-color:var(--primary);background:rgba(27,179,74,.12)}
.lesson-index{width:30px;height:30px;border-radius:999px;background:var(--primary);color:#fff;display:grid;place-items:center;font-weight:700}
.accordion-group{display:grid;gap:12px;margin-top:16px}
.accordion-item{border:1px solid rgba(0,0,0,.08);border-radius:12px;background:var(--card);overflow:hidden}
.accordion-toggle{width:100%;background:transparent;border:none;text-align:left;padding:12px 16px;font-weight:700;display:flex;align-items:center;justify-content:space-between;cursor:pointer;color:var(--text)}
.accordion-toggle::after{content:'+';font-weight:700;transition:transform .2s ease}
.accordion-item.open .accordion-toggle::after{transform:rotate(45deg)}
.accordion-content{max-height:0;overflow:hidden;transition:max-height .25s ease;padding:0 16px}
.accordion-item.open .accordion-content{max-height:520px;padding:0 16px 16px}
.accordion-content p{margin:12px 0 0}
.about-list{list-style:none;margin:0;padding:0;display:grid;gap:6px;font-size:14px}
.purchase-modal{position:fixed;inset:0;background:rgba(0,0,0,.7);display:flex;align-items:center;justify-content:center;padding:16px;z-index:20}
.purchase-modal[hidden]{display:none}
.purchase-modal-card{background:var(--card);border-radius:16px;padding:24px;max-width:420px;display:grid;gap:12px;text-align:center}
.purchase-modal-card a{color:var(--primary);font-weight:600;text-decoration:none}
.purchase-modal-actions{display:flex;justify-content:center}
.notifications{display:grid;gap:16px}
.notification-card{border:1px solid rgba(0,0,0,.08);border-radius:14px;padding:16px;display:grid;gap:12px;background:var(--card)}
.notification-card.unread{border-color:var(--primary)}
.notification-head{display:flex;align-items:center;justify-content:space-between;gap:12px}
.notification-actions{display:flex;gap:12px;flex-wrap:wrap}
.notification-actions form{margin:0}
.notification-actions .btn{flex:1 1 160px;text-align:center}
.notification-meta{display:grid;gap:6px;font-size:14px;color:var(--muted)}
.notification-empty{text-align:center;color:var(--muted);padding:32px 16px}
.device-alert{position:fixed;inset:0;background:rgba(0,0,0,.78);display:flex;align-items:center;justify-content:center;padding:24px;z-index:30}
.device-alert-modal{background:var(--card);border-radius:18px;padding:24px;max-width:460px;width:100%;display:grid;gap:16px}
.device-alert[hidden]{display:none}
.device-alert-details{display:grid;gap:6px;font-size:14px}
.device-alert-actions{display:flex;gap:12px;justify-content:flex-end;flex-wrap:wrap}
.device-alert-map{border-radius:12px;overflow:hidden;height:220px;border:1px solid rgba(0,0,0,.1)}
.device-alert-map iframe{width:100%;height:100%;border:0}
.device-alert-modal h2{margin:0}
.device-alert-modal p{margin:0}
.device-alert-modal[hidden]{display:none}
html[data-theme="dark"] .nav-link:hover{background:rgba(255,255,255,.08)}
html[data-theme="dark"] .profile-tabs .tab{background:rgba(255,255,255,.08)}
html[data-theme="dark"] .profile-tabs .tab:hover{background:rgba(255,255,255,.14)}
html[data-theme="dark"] .course-card-mini{background:rgba(255,255,255,.04);border-color:rgba(255,255,255,.12)}
html[data-theme="dark"] .course-thumb{border-color:rgba(255,255,255,.1)}
html[data-theme="dark"] .profile-note{background:rgba(255,255,255,.06)}
html[data-theme="dark"] .video-item{background:rgba(255,255,255,.04);border-color:rgba(255,255,255,.12)}
html[data-theme="dark"] .existing-card{background:rgba(255,255,255,.04);border-color:rgba(255,255,255,.12)}
html[data-theme="dark"] .side-card{border-color:rgba(255,255,255,.12);background:rgba(255,255,255,.04)}
html[data-theme="dark"] .side-course{border-color:rgba(255,255,255,.12);background:rgba(255,255,255,.02)}
html[data-theme="dark"] .side-course.active{background:rgba(57,255,20,.12)}
html[data-theme="dark"] .accordion-item{border-color:rgba(255,255,255,.12);background:rgba(255,255,255,.04)}
html[data-theme="dark"] .lesson-card{background:rgba(255,255,255,.02);border-color:rgba(255,255,255,.12)}
html[data-theme="dark"] .lesson-card.active{background:rgba(57,255,20,.12);border-color:var(--primary)}
